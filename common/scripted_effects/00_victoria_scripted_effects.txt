voyage_of_potemkin = {
	while = { 
		limit = { 
			any_state = {
				has_variable = potemkin_destination_state
				OR = {
					owner = ROOT
					owner = {
						is_subject_of = ROOT
					}
				}
			}
		}  
		random_state = {
			limit = {
				has_variable = potemkin_destination_state
			}
			remove_variable = potemkin_destination_state
			random_neighbouring_state = {
				limit = {
					is_coastal = yes
				}
				set_variable = potemkin_destination_state
			}
			debug_log_scopes = yes
		}	
	}	
	random_state = {
		limit = {
			has_variable = potemkin_destination_state
		}
		remove_variable = potemkin_destination_state
		owner = {
			save_scope_as = potemkin_final_destination
		}
	}
}

adopt_random_antigovernment_ideology = {
	custom_tooltip = {
		text = adopt_random_antigovernment_ideology_tt
		random_list = { 
			50 = {
				trigger = {
					owner = {
						NOT = {
							ruler = {
								has_ideology = ideology:ideology_social_democrat	
							}
						}
					}
				}
				modifier = {
					if = {
						limit = {
							owner = {
								has_law = law_type:law_council_elective
							}
						}
						add = 50
					}
				}
				set_ideology = ideology:ideology_social_democrat
			}
			100 = {
				trigger = {
					owner = {
						NOT = {
							ruler = {
								has_ideology = ideology:ideology_communist	
							}
						}
						NOT = {
							has_law = law_type:law_council_elective
						}
					}
				}
				modifier = {
					if = {
						limit = {
							owner = {
								has_law = law_type:law_hereditary
							}
						}
						add = 25
					}
					if = {
						limit = {
							owner = {
								has_law = law_type:law_autocracy
							}
						}
						add = 25
					}
					if = {
						limit = {
							this.interest_group = {
								is_interest_group_type = ig_laborists
							}
						}
						add = 100
					}
					if = {
						limit = {
							owner.ruler = {
								OR = {
									has_ideology = ideology:ideology_fascist
									has_ideology = ideology:ideology_ethno_nationalist
									has_ideology = ideology:ideology_traditionalist
								}
							}
						}
						add = 100
					}
				}
				set_ideology = ideology:ideology_communist
			}
			100 = {
				trigger = {
					owner = {
						NOT = {
							ruler = {
								has_ideology = ideology:ideology_vanguardist	
							}
						}
						NOT = {
							has_law = law_type:law_council_elective
						}
					}
				}
				modifier = {
					if = {
						limit = {
							owner = {
								has_law = law_type:law_hereditary
							}
						}
						add = 25
					}
					if = {
						limit = {
							owner = {
								has_law = law_type:law_autocracy
							}
						}
						add = 25
					}
					if = {
						limit = {
							this.interest_group = {
								is_interest_group_type = ig_laborists
							}
						}
						add = 100
					}
					if = {
						limit = {
							owner.ruler = {
								OR = {
									has_ideology = ideology:ideology_fascist
									has_ideology = ideology:ideology_ethno_nationalist
									has_ideology = ideology:ideology_traditionalist
								}
							}
						}
						add = 100
					}
				}
				set_ideology = ideology:ideology_vanguardist
			}
			100 = {
				trigger = {
					owner = {
						NOT = {
							ruler = {
								has_ideology = ideology:ideology_anarchist	
							}
						}
					}
				}
				modifier = {
					if = {
						limit = {
							owner = {
								has_law = law_type:law_hereditary
							}
						}
						add = 25
					}
					if = {
						limit = {
							owner = {
								has_law = law_type:law_autocracy
							}
						}
						add = 50
					}
					if = {
						limit = {
							this.interest_group = {
								OR = {
									is_interest_group_type = ig_laborists
									is_interest_group_type = ig_ruralists
								}
							}
						}
						add = 100
					}
					if = {
						limit = {
							owner.ruler = {
								OR = {
									has_ideology = ideology:ideology_fascist
									has_ideology = ideology:ideology_ethno_nationalist
									has_ideology = ideology:ideology_traditionalist
								}
							}
						}
						add = 100
					}
				}
				set_ideology = ideology:ideology_anarchist
			}
			100 = {
				trigger = {
					owner = {
						NOT = {
							ruler = {
								has_ideology = ideology:ideology_ethno_nationalist	
							}
						}
					}
				}
				modifier = {
					if = {
						limit = {
							owner.ruler = {
								OR = {
									has_ideology = ideology:ideology_radical
									has_ideology = ideology:ideology_feminist
									has_ideology = ideology:ideology_humanitarian
									has_ideology = ideology:ideology_social_democrat
								}
							}
						}
						add = 50
					}
					if = {
						limit = {
							owner.ruler = {
								OR = {
									has_ideology = ideology:ideology_communist
									has_ideology = ideology:ideology_anarchist
									has_ideology = ideology:ideology_vanguardist
								}
							}
						}
						add = 100
					}
					if = {
						limit = {
							owner.ruler = {
								OR = {
									has_ideology = ideology:ideology_fascist
									has_ideology = ideology:ideology_ethno_nationalist
									has_ideology = ideology:ideology_traditionalist
								}
							}
						}
						multiply = {
							value = 0.25
						}
					}
					if = {
						limit = {
							owner = {
								has_law = law_type:law_open_borders
							}
						}
						add = 100
					}
					if = {
						limit = {
							owner = {
								has_law = law_type:law_multiculturalistism
							}
						}
						multiply = {
							value = 3
						}
					}
					if = {
						limit = {
							owner = {
								has_law = law_type:law_integrationist
							}
						}
						multiply = {
							value = 2
						}
					}
					if = {
						limit = {
							owner = {
								has_law = law_type:law_council_elective
							}
						}
						multiply = {
							value = 1.5
						}
					}
				}
				set_ideology = ideology:ideology_ethno_nationalist
			}
			50 = {
				trigger = {
					owner = {
						has_law = law_type:law_religious_institutions
						NOT = {
							ruler = {
								has_ideology = ideology:ideology_atheist	
							}
						}
					}
				}
				modifier = {
					if = {
						limit = {
							owner = {
								has_law = law_type:law_hereditary
							}
						}
						add = 50
					}
					if = {
						limit = {
							owner = {
								has_law = law_type:law_religious_institutions
							}
						}
						add = 100
					}
					if = {
						limit = {
							owner = {
								has_law = law_type:law_theocratic
							}
						}
						add = 200
					}
				}
				set_ideology = ideology:ideology_atheist
			}
			50 = {
				trigger = {
					owner = {
						NOT = {
							ruler = {
								has_ideology = ideology:ideology_radical	
							}
						}
					}
				}
				modifier = {	
					if = {
						limit = {
							owner = {
								has_law = law_type:law_hereditary
							}
						}
						add = 100
					}	
					if = {
						limit = {
							owner = {
								has_law = law_type:law_autocracy
							}
						}
						add = 100
					}
					if = {
						limit = {
							owner = {
								has_law = law_type:law_oligarchy
							}
						}
						add = 50
					}
					if = {
						limit = {
							owner = {
								has_law = law_type:law_representative_democracy
							}
						}
						add = 25
					}
				}
				set_ideology = ideology:ideology_radical
			}
			100 = {
				trigger = {
					owner = {
						NOT = {
							ruler = {
								has_ideology = ideology:ideology_fascist	
							}
						}
					}
				}
				modifier = {
					if = {
						limit = {
							owner.ruler = {
								OR = {
									has_ideology = ideology:ideology_radical
									has_ideology = ideology:ideology_feminist
									has_ideology = ideology:ideology_humanitarian
									has_ideology = ideology:ideology_social_democrat
								}
							}
						}
						add = 50
					}
					if = {
						limit = {
							owner.ruler = {
								OR = {
									has_ideology = ideology:ideology_communist
									has_ideology = ideology:ideology_anarchist
									has_ideology = ideology:ideology_vanguardist
								}
							}
						}
						add = 100
					}
					if = {
						limit = {
							owner.ruler = {
								OR = {
									has_ideology = ideology:ideology_fascist
									has_ideology = ideology:ideology_ethno_nationalist
									has_ideology = ideology:ideology_traditionalist
								}
							}
						}
						multiply = {
							value = 0.25
						}
					}
					if = {
						limit = {
							owner = {
								has_law = law_type:law_council_elective
							}
						}
						multiply = {
							value = 2
						}
					}
				}
				set_ideology = ideology:ideology_fascist
			}
			50 = {
				trigger = {
					owner = {
						NOT = {
							ruler = {
								has_ideology = ideology:ideology_market_liberal	
							}
						}
					}
				}
				modifier = {
					if = {
						limit = {
							owner = {
								has_law = law_type:law_socialization
							}
						}
						add = 50
					}
					if = {
						limit = {
							owner = {
								has_law = law_type:law_anti_industrialization
							}
						}
						add = 50
					}
					if = {
						limit = {
							owner = {
								has_law = law_type:law_isolationism
							}
						}
						add = 50
					}
					if = {
						limit = {
							owner.ruler = {
								OR = {
									has_ideology = ideology:ideology_communist
									has_ideology = ideology:ideology_anarchist
									has_ideology = ideology:ideology_vanguardist
								}
							}
						}
						add = 100
					}
				}
				set_ideology = ideology:ideology_market_liberal
			}
			50 = {
				trigger = {
					owner = {
						OR = {
							has_law = law_type:law_socialization
							has_law = law_type:law_free_market
							has_law = law_type:law_interventionism
						}
						NOT = {
							ruler = {
								has_ideology = ideology:ideology_luddite	
							}
						}
					}
				}
				modifier = {
					if = {
						limit = {
							owner = {
								any_scope_state = {
									any_scope_building = {
										is_building_group = bg_heavy_industry
										level >= 5
									}
									state_unemployment_rate > 0.1
								}
							}
						}
						add = 25
					}
					if = {
						limit = {
							owner = {
								any_scope_building = {
									is_building_group = bg_heavy_industry
									level >= 5
								}
							}
						}
						add = 25
					}
					if = {
						limit = {
							OR = {
								is_interest_group_type = ig_ruralists
								is_interest_group_type = ig_moralists
							}
						}
						add = 50
					}
					if = {
						limit = {
							NOR = {
								is_interest_group_type = ig_ruralists
								is_interest_group_type = ig_moralists
							}
						}
						add = -50
					}
					if = {
						limit = {
							owner = {
								has_ruling_interest_group = ig_corporatists
							}
						}
						multiply = {
							value = 2
						}
					}
					if = {
						limit = {
							owner = {
								has_ruling_interest_group = ig_ruralists
							}
						}
						multiply = {
							value = 0.25
						}
					}
				}
				set_ideology = ideology:ideology_luddite
			}
			50 = {
				trigger = {
					owner = {
						NOT = {
							ruler = {
								has_ideology = ideology:ideology_feminist	
							}
						}
					}
				}
				modifier = {
					if = {
						limit = {
							owner = {
								has_law = law_type:law_hereditary
							}
						}
						add = 25
					}
				}
				set_ideology = ideology:ideology_feminist
			}
			50 = {
				trigger = {
					owner = {
						NOT = {
							ruler = {
								has_ideology = ideology:ideology_humanitarian	
							}
						}
					}
				}
				modifier = {
					if = {
						limit = {
							owner = {
								has_law = law_type:law_hereditary
							}
						}
						add = 25
					}
				}
				set_ideology = ideology:ideology_humanitarian
			}

			50 = {
				trigger = {
					NOT = {	
						owner.ruler = {
							has_ideology = ideology:ideology_traditionalist	
						}
					}
				}
				modifier = {
					if = {
						limit = {
							this.interest_group = {
								OR = {
									is_interest_group_type = ig_elites
									is_interest_group_type = ig_moralists
								}
							}
						}
						multiply = {
							value = 2
						}
					}
					if = {
						limit = {
							owner.ruler = {
								OR = {
									has_ideology = ideology:ideology_radical
									has_ideology = ideology:ideology_feminist
									has_ideology = ideology:ideology_humanitarian
									has_ideology = ideology:ideology_social_democrat
								}
							}
						}
						add = 50
					}
					if = {
						limit = {
							owner.ruler = {
								OR = {
									has_ideology = ideology:ideology_communist
									has_ideology = ideology:ideology_anarchist
									has_ideology = ideology:ideology_vanguardist
								}
							}
						}
						add = 100
					}
					if = {
						limit = {
							owner.ruler = {
								OR = {
									has_ideology = ideology:ideology_fascist
									has_ideology = ideology:ideology_ethno_nationalist
									has_ideology = ideology:ideology_traditionalist
								}
							}
						}
						multiply = {
							value = 0.25
						}
					}
					if = {
						limit = {
							this.interest_group = {
								OR = {
									is_interest_group_type = ig_corporatists
									is_interest_group_type = ig_laborists
								}
							}
						}
						multiply = {
							value = 0.2
						}
					}
				}
				set_ideology = ideology:ideology_traditionalist
			}

			50 = {
				trigger = {
					NOT = {	
						owner.ruler = {
							has_ideology = ideology:ideology_republican_leader	
						}
					}
					owner = {
						has_law = law_type:law_hereditary
					}
				}
				modifier = {
					if = {
						limit = {
							owner = {
								has_law = law_type:law_hereditary
							}
						}
						multiply = {
							value = 2
						}
					}
					if = {
						limit = {
							owner = {
								has_law = law_type:law_autocracy
							}
						}
						multiply = {
							value = 2
						}
					}
					if = {
						limit = {
							owner = {
								has_law = law_type:law_oligarchy
							}
						}
						add = 25
					}
					if = {
						limit = {
							owner = {
								has_law = law_type:law_representative_democracy
							}
						}
						add = 25
					}
					if = {
						limit = {
							this.interest_group = {
								is_interest_group_type = ig_elites
							}
						}
						multiply = {
							value = 0.10
						}
					}
				}
				set_ideology = ideology:ideology_republican_leader
			}

			50 = {
				trigger = {
					owner = {
						NOT = {
							ruler = {
								has_ideology = ideology:ideology_abolitionist	
							}
						}
						OR = {
							has_law = law_type:law_serfdom
							NOT = {
								has_law = law_type:law_slavery_banned
							}
						}
					}
				}
				modifier = {
					if = {
						limit = {
							owner = {
								has_law = law_type:law_serfdom
							}
						}
						add = 25
					}
					if = {
						limit = {
							owner = {
								NOT = {
									has_law = law_type:law_slavery_banned
								}
							}
						}
						add = 25
					}
					if = {
						limit = {
							owner = {
								has_law = law_type:law_slave_trade
							}
						}
						add = 50
					}
					if = {
						limit = {
							this.interest_group = {
								is_interest_group_type = ig_elites
							}
						}
						multiply = {
							value = 0.05
						}
					}
				}
				set_ideology = ideology:ideology_abolitionist
			}
		} 
	}
}

save_agitator_election_scopes = {
	if = {
		limit = {
			has_variable = preset_ideology
		}
		scope:agitator_scope = {
			this.interest_group = {
				save_scope_as = agitator_ig_scope
			}
		}
	}
	else = {
		random_scope_character = {
			limit = {
				has_role = agitator
			}
			save_scope_as = agitator_scope
			this.interest_group = {
				save_scope_as = agitator_ig_scope
			}
		}
	}

	#Attach to party

	if = {
		limit = {
			any_political_movement = {
				any_supporting_character = {
					this = scope:agitator_scope
				}
			}
		} 
		random_political_movement = {
			limit = {
				any_supporting_character = {
					this = scope:agitator_scope
				}	
			}
			save_scope_as = agitator_movement_scope
		}
	}
	if = {
		limit = {
			scope:agitator_scope.interest_group = {
				has_party = yes
			}
		}
		scope:agitator_scope.interest_group.party = {
			save_scope_as = agitator_party_scope
		}
	}
	else = {
		if = {
			limit = {
				scope:agitator_scope = {
					has_socialist_ideology = yes
				}
				any_active_party = {
					any_member = {
						leader = {
							has_socialist_ideology = yes
						}
					}	
				}
			}	
			random_active_party = {
				limit = {
					any_member = {
						leader = {
							has_socialist_ideology = yes
						}	
					}
				}
				save_scope_as = agitator_party_scope	
			}
		}
		else_if = {
			limit = {
				scope:agitator_scope = {
					has_progressive_ideology = yes
				}
				any_active_party = {
					any_member = {
						leader = {
							has_progressive_ideology = yes
						}
					}
				}
			}	
			random_active_party = {
				limit = {
					any_member = {
						leader = {
							has_progressive_ideology = yes
						}	
					}
				}
				save_scope_as = agitator_party_scope	
			}
		}
		else_if = {
			limit = {
				scope:agitator_scope = {
					has_liberal_ideology = yes
				}
				any_active_party = {
					any_member = {
						leader = {
							has_liberal_ideology = yes
						}
					}
				}
			}	
			random_active_party = {
				limit = {
					any_member = {
						leader = {
							has_liberal_ideology = yes
						}	
					}
				}
				save_scope_as = agitator_party_scope	
			}
		}
		else_if = {
			limit = {
				scope:agitator_scope = {
					has_reactionary_ideology = yes
				}
				any_active_party = {
					any_member = {
						leader = {
							has_reactionary_ideology = yes
						}
					}
				}
			}	
			random_active_party = {
				limit = {
					any_member = {
						leader = {
							has_reactionary_ideology = yes
						}	
					}
				}
				save_scope_as = agitator_party_scope	
			}
		}
		else_if = {
			limit = {
				scope:agitator_scope = {
					has_conservative_ideology = yes
				}
				any_active_party = {
					any_member = {
						leader = {
							has_conservative_ideology = yes
						}
					}
				}
			}	
			random_active_party = {
				limit = {
					any_member = {
						leader = {
							has_conservative_ideology = yes
						}	
					}
				}
				save_scope_as = agitator_party_scope	
			}
		}
		else = {
			random_active_party = { #Chaos reigns
				save_scope_as = agitator_party_scope
			}
		}
	}
	remove_variable = preset_ideology
}

clear_legal_single_party = { 
	remove_variable = only_valid_party
}	


communist_agitator_election_scope_effect = {
	random_active_party = {
		limit = {
			is_party_type = communist_party
		}
		save_scope_as = agitator_party_scope
	}
	random_scope_character = {
		limit = {
			OR = {
				has_ideology = ideology:ideology_communist
				has_ideology = ideology:ideology_vanguardist
				has_ideology = ideology:ideology_anarchist
				AND = {
					this.interest_group = {
						is_member_of_party = owner.py:communist_party
					}
					NOT = {
						law_stance = {
							law = law_type:law_council_elective
							value < neutral
						}
					}
				}
			}
			has_role = agitator
		}
		save_scope_as = agitator_scope
		this.interest_group = {
			save_scope_as = agitator_ig_scope
		}
		this.political_movement = {
			save_scope_as = agitator_movement_scope
		}
	}
}


fascist_agitator_election_scope_effect = {
	random_active_party = {
		limit = {
			is_party_type = fascist_party
		}
		save_scope_as = agitator_party_scope
	}
	random_scope_character = {
		limit = {
			OR = {
				has_ideology = ideology:ideology_fascist
				has_ideology = ideology:ideology_ethno_nationalist
				AND = {
					this.interest_group = {
						is_member_of_party = owner.py:fascist_party
					}
					NOT = {
						law_stance = {
							law = law_type:law_ethnonationalist
							value < neutral
						}
					}
				}
			}
			has_role = agitator
		}
		save_scope_as = agitator_scope
		this.interest_group = {
			save_scope_as = agitator_ig_scope
		}
		this.political_movement = {
			save_scope_as = agitator_movement_scope
		}
	}
}

agrarian_agitator_election_scope_effect = {
	random_active_party = {
		limit = {
			is_party_type = agrarian_party
		}
		save_scope_as = agitator_party_scope
	}
	random_scope_character = {
		limit = {
			OR = {
				has_ideology = ideology:ideology_agrarian
				this.interest_group = {
					is_member_of_party = owner.py:agrarian_party
				}
			}
			has_role = agitator
		}
		save_scope_as = agitator_scope
		this.interest_group = {
			save_scope_as = agitator_ig_scope
		}
		this.political_movement = {
			save_scope_as = agitator_movement_scope
		}
	}
}

socdem_agitator_election_scope_effect = {
	random_active_party = {
		limit = {
			is_party_type = social_democrat_party
		}
		save_scope_as = agitator_party_scope
	}
	random_scope_character = {
		limit = {
			OR = {
				has_ideology = ideology:ideology_social_democrat
				this.interest_group = {
					is_member_of_party = owner.py:social_democrat_party
				}
			}
			has_role = agitator
		}
		save_scope_as = agitator_scope
		this.interest_group = {
			save_scope_as = agitator_ig_scope
		}
		this.political_movement = {
			save_scope_as = agitator_movement_scope
		}
	}
}

liberal_agitator_election_scope_effect = {
	random_active_party = {
		limit = {
			is_party_type = liberal_party
		}
		save_scope_as = agitator_party_scope
	}
	random_scope_character = {
		limit = {
			OR = {
				has_ideology = ideology:ideology_reformer
				has_ideology = ideology:ideology_humanitarian
				has_ideology = ideology:ideology_market_liberal
				this.interest_group = {
					is_member_of_party = owner.py:liberal_party
				}
			}
			has_role = agitator
		}
		save_scope_as = agitator_scope
		this.interest_group = {
			save_scope_as = agitator_ig_scope
		}
		this.political_movement = {
			save_scope_as = agitator_movement_scope
		}
	}
}

conservative_agitator_election_scope_effect = {
	random_active_party = {
		limit = {
			is_party_type = conservative_party
		}
		save_scope_as = agitator_party_scope
	}
	random_scope_character = {
		limit = {
			OR = {
				has_ideology = ideology:ideology_traditionalist
				has_ideology = ideology:ideology_slaver
				this.interest_group = {
					is_member_of_party = owner.py:conservative_party
				}
			}
			has_role = agitator
		}
		save_scope_as = agitator_scope
		this.interest_group = {
			save_scope_as = agitator_ig_scope
		}
		this.political_movement = {
			save_scope_as = agitator_movement_scope
		}
	}
}

radical_agitator_election_scope_effect = {
	random_active_party = {
		limit = {
			is_party_type = progressive_party
		}
		save_scope_as = agitator_party_scope
	}
	random_scope_character = {
		limit = {
			OR = {
				has_ideology = ideology:ideology_radical
				this.interest_group = {
					is_member_of_party = owner.py:progressive_party
				}
			}
			has_role = agitator
		}
		save_scope_as = agitator_scope
		this.interest_group = {
			save_scope_as = agitator_ig_scope
		}
		this.political_movement = {
			save_scope_as = agitator_movement_scope
		}
	}
}

gen_ruler_party = {
	if = {
		limit = {
			OR = {
				ruler = {
					has_socialist_ideology = yes
				}
				ruler.interest_group.leader = {
					has_socialist_ideology = yes
				}
			}
		}
		random_potential_party = {
			limit = {
				is_party_type = communist_party
			}
			save_scope_as = only_legit_party_scope
		}
		set_variable = { name = only_valid_party value = scope:only_legit_party_scope }
	}
	else_if = {
		limit = {
			OR = {
				ruler = {
					OR = {
						has_ideology = ideology:ideology_fascist
						has_ideology = ideology:ideology_ethno_nationalist
					}
				}
				ruler.interest_group.leader = {
					OR = {
						has_ideology = ideology:ideology_fascist
						has_ideology = ideology:ideology_ethno_nationalist
					}
				}
			}
		}
		random_potential_party = {
			limit = {
				is_party_type = fascist_party
			}
			save_scope_as = only_legit_party_scope
		}
		set_variable = { name = only_valid_party value = scope:only_legit_party_scope }
	}
	else_if = {
		limit = {
			OR = {
				ruler = {
					has_ideology = ideology:ideology_anarchist
				}
				ruler.interest_group.leader = {
					has_ideology = ideology:ideology_anarchist
				}
			}
		}
		random_potential_party = {
			limit = {
				is_party_type = anarchist_party
			}
			save_scope_as = only_legit_party_scope
		}
		set_variable = { name = only_valid_party value = scope:only_legit_party_scope }
	}
	else_if = {
		limit = {
			OR = {
				ruler = {
					has_ideology = ideology:ideology_social_democrat
					has_ideology = ideology:ideology_feminist
					has_ideology = ideology:ideology_humanitarian
				}
				ruler.interest_group.leader = {
					has_ideology = ideology:ideology_social_democrat
					has_ideology = ideology:ideology_feminist
					has_ideology = ideology:ideology_humanitarian
				}
				ruler = {
					is_interest_group_type = ig_laborists
				}
			}
		}
		random_potential_party = {
			limit = {
				is_party_type = social_democrat_party
			}
			save_scope_as = only_legit_party_scope
		}
		set_variable = { name = only_valid_party value = scope:only_legit_party_scope }
	}
	else_if = {
		limit = {
			OR = {
				ruler = {
					has_progressive_ideology = yes
				}
				ruler.interest_group.leader = {
					has_progressive_ideology = yes
				}
			}
		}
		random_potential_party = {
			limit = {
				is_party_type = progressive_party
			}
			save_scope_as = only_legit_party_scope
		}
		set_variable = { name = only_valid_party value = scope:only_legit_party_scope }
	}
	else_if = {
		limit = {
			OR = {
				ruler = {
					has_liberal_ideology = yes
				}
				ruler.interest_group.leader = {
					has_liberal_ideology = yes
				}
			}
		}
		random_potential_party = {
			limit = {
				is_party_type = liberal_party
			}
			save_scope_as = only_legit_party_scope
		}
		set_variable = { name = only_valid_party value = scope:only_legit_party_scope }
	}
	else_if = {
		limit = {
			OR = {
				ruler = {
					has_ideology = ideology:ideology_jingoist_leader
				}
				ruler.interest_group.leader = {
					has_ideology = ideology:ideology_jingoist_leader
				}
				ruler = {
					is_interest_group_type = ig_securocrats
is_interest_group_type = ig_patriots
				}
			}
		}
		random_potential_party = {
			limit = {
				is_party_type = military_party
			}
			save_scope_as = only_legit_party_scope
		}
		set_variable = { name = only_valid_party value = scope:only_legit_party_scope }
	}
	else_if = {
		limit = {
			OR = {
				ruler = {
					has_ideology = ideology:ideology_pacifist
				}
				ruler.interest_group.leader = {
					has_ideology = ideology:ideology_pacifist
				}
				ruler = {
					is_interest_group_type = ig_ruralists
				}
			}
		}
		random_potential_party = {
			limit = {
				is_party_type = agrarian_party
			}
			save_scope_as = only_legit_party_scope
		}
		set_variable = { name = only_valid_party value = scope:only_legit_party_scope }
	}
	else = {
		random_potential_party = {
			limit = {
				is_party_type = conservative_party
			}
			save_scope_as = only_legit_party_scope
		}
		set_variable = { name = only_valid_party value = scope:only_legit_party_scope }
	}
}

enact_preferred_governance_principle = {
	random_interest_group = {
		limit = {
			is_in_government = yes
			is_strongest_ig_in_government = yes
		}
		save_scope_as = ruling_ig
	}
	if = {
		limit = {
			scope:ruling_ig = {
				law_stance = {
					law = law_type:law_council_elective
					value = strongly_approve
				}
			}
		}
		activate_law = law_type:law_council_elective
	}
	else_if = {
		limit = {
			scope:ruling_ig = {
				law_stance = {
					law = law_type:law_hereditary
					value = strongly_approve
				}
			}
		}
		activate_law = law_type:law_hereditary
	}
	else_if = {
		limit = {
			scope:ruling_ig = {
				law_stance = {
					law = law_type:law_parliamentary
					value = strongly_approve
				}
			}
		}
		activate_law = law_type:law_parliamentary
	}
	else_if = {
		limit = {
			scope:ruling_ig = {
				law_stance = {
					law = law_type:law_executive
					value = strongly_approve
				}
			}
		}
		activate_law = law_type:law_executive
	}
	else_if = {
		limit = {
			scope:ruling_ig = {
				law_stance = {
					law = law_type:law_theocratic
					value = strongly_approve
				}
			}
		}
		activate_law = law_type:law_theocratic
	}
	else_if = {
		limit = {
			scope:ruling_ig = {
				law_stance = {
					law = law_type:law_council_elective
					value = approve
				}
			}
		}
		activate_law = law_type:law_council_elective
	}
	else_if = {
		limit = {
			scope:ruling_ig = {
				law_stance = {
					law = law_type:law_hereditary
					value = approve
				}
			}
		}
		activate_law = law_type:law_hereditary
	}
	else_if = {
		limit = {
			scope:ruling_ig = {
				law_stance = {
					law = law_type:law_parliamentary
					value = approve
				}
			}
		}
		activate_law = law_type:law_parliamentary
	}
	else_if = {
		limit = {
			scope:ruling_ig = {
				law_stance = {
					law = law_type:law_executive
					value = approve
				}
			}
		}
		activate_law = law_type:law_executive
	}
	else_if = {
		limit = {
			scope:ruling_ig = {
				law_stance = {
					law = law_type:law_theocratic
					value = approve
				}
			}
		}
		activate_law = law_type:law_theocratic
	}
	else = {
		activate_law = law_type:law_executive
		if = {
			limit = {
				civil_war_origin_country = {
					has_law = law_type:law_hereditary
				}
			}
			set_variable = prov_gov_monarchy
		}
		else_if = {
			limit = {
				civil_war_origin_country = {
					has_law = law_type:law_theocratic
				}
			}
			set_variable = prov_gov_theocracy
		}
		else_if = {
			limit = {
				civil_war_origin_country = {
					has_law = law_type:law_council_elective
				}
			}
			set_variable = prov_gov_council_republic
		}
		set_variable = revolutionary_prov_gov_var
	}
}

enact_preferred_governance_principle_new = {
	random_interest_group = {
		limit = {
			is_in_government = yes
			is_strongest_ig_in_government = yes
		}
		save_scope_as = ruling_ig
	}
	random_law = {
		limit = {
			OR = {
				type = law_type:law_chiefdom
				type = law_type:law_hereditary
				type = law_type:law_executive
				type = law_type:law_parliamentary
				type = law_type:law_theocratic
				type = law_type:law_council_elective
			}
			type = {
				save_temporary_scope_as = enacted_gov_pric
			}
			scope:ruling_ig = {
				law_stance = {
					law = scope:enacted_gov_pric
					value = strongly_approve
				}
			}
		}
		save_scope_as = preferred_gov_principles
	}
	if = {
		limit = {
			NOT = {
				exists = scope:preferred_gov_principles
			}
		}
		random_law = {
			limit = {
				OR = {
					type = law_type:law_chiefdom
					type = law_type:law_hereditary
					type = law_type:law_executive
					type = law_type:law_parliamentary
					type = law_type:law_theocratic
					type = law_type:law_council_elective
				}
				type = {
					save_temporary_scope_as = enacted_gov_pric
				}
				scope:ruling_ig = {
					law_stance = {
						law = scope:enacted_gov_pric
						value = approve
					}
				}
			}
			save_scope_as = preferred_gov_principles
		}
	}
	if = {
		limit = {
			NOT = {
				exists = scope:preferred_gov_principles
			}
		}
		random_law = {
			limit = {
				OR = {
					type = law_type:law_chiefdom
					type = law_type:law_hereditary
					type = law_type:law_executive
					type = law_type:law_parliamentary
					type = law_type:law_theocratic
					type = law_type:law_council_elective
				}	
				type = {
					save_temporary_scope_as = enacted_gov_pric
				}
				scope:ruling_ig = {
					law_stance = {
						law = scope:enacted_gov_pric
						value = neutral
					}
				}
			}
			save_scope_as = preferred_gov_principles
		}
	}
	activate_law = scope:preferred_gov_principles
}

exile_character_with_martyrdom = {
	if = {
		limit = {
			NOT = {
				has_modifier = modifier_political_martyr
			}
		}
		add_modifier = modifier_political_martyr
	}
	exile_character = yes
}