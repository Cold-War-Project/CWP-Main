onaction_olympics_application = {
    # Applications
   	if = {
     	limit = {
			overlord = { is_target_in_global_variable_list = { name = un_members_list target = THIS} }
			is_target_in_global_variable_list = { name = unrecognized_olympic_committee_list target = this }
   		}
      	add_to_global_variable_list = {
      	    name = national_olympic_committee_list
       	    target = THIS
       	}
      	remove_list_global_variable = {
      	    name = unrecognized_olympic_committee_list
       	    target = THIS
       	}
   	}
}

onaction_olympics_cities_application = {
	random = {
		chance = 1
		modifier = {
			trigger = {
				global_variable_list_size  = { name = olympics_host_city_applicants value <= 3 }
			}
			add = 50
		}
		random_state = {
	 		limit = {
				owner = { is_target_in_global_variable_list = { name = national_olympic_committee_list target = THIS} }
				OR = {
					AND = {
						is_capital = yes
						total_urbanization >= 500
					}
					AND = {
						state_population >= 3000000
						OR = {
							total_urbanization >= 1000
							loyalist_fraction = { value >= 0.25 }
						}
					}
				}
				is_incorporated = yes
				is_in_revolt = no
				market_access >= 0.75
				devastation <= 5
				turmoil <= 0.5
			}
			save_scope_as = potential_olympic_host_state
			this.owner = { trigger_event = olympics.2 }
		}
	}
}

set_first_postwar_olympics_date = {
   	set_global_variable = { name = olympics_next value = 1948 }
   	set_global_variable = { name = olympics_after_next value = 1952 }

	set_global_variable = {
		name = olympics_next_host_city
		value = s:STATE_HOME_COUNTIES.region_state:GBR
	}
	set_global_variable = {
		name = olympics_next_host_city_alt
		value = s:STATE_CALIFORNIA.region_state:USA
	}

	add_to_global_variable_list = {
		name = olympics_host_city_applicants
		target = s:STATE_SOUTHERN_FINLAND.region_state:FIN
	}
	add_to_global_variable_list = {
		name = olympics_host_city_applicants
		target = s:STATE_CALIFORNIA.region_state:USA
	}
	add_to_global_variable_list = {
		name = olympics_host_city_applicants
		target = s:STATE_MISSISSIPPI_VALLEY.region_state:USA
	}
	add_to_global_variable_list = {
		name = olympics_host_city_applicants
		target = s:STATE_HOLLAND.region_state:NET
	}
	add_to_global_variable_list = {
		name = olympics_host_city_applicants
		target = s:STATE_MICHIGAN.region_state:USA
	}
	add_to_global_variable_list = {
		name = olympics_host_city_applicants
		target = s:STATE_ILLINOIS.region_state:USA
	}
	add_to_global_variable_list = {
		name = olympics_host_city_applicants
		target = s:STATE_KEYSTONE.region_state:USA
	}
	add_to_global_variable_list = {
		name = olympics_host_city_applicants
		target = s:STATE_ATTICA.region_state:GRE
	}
	add_to_global_variable_list = {
		name = olympics_host_city_applicants
		target = s:STATE_WEST_SWITZERLAND.region_state:SWI
	}
	add_to_global_variable_list = {
		name = olympics_host_city_applicants
		target = s:STATE_SVEALAND.region_state:SWE
	}
}

order_host_city_applicants_list = {

	ordered_in_global_list = {
		variable = olympics_host_city_applicants
		order_by = olympic_application_ranking
		max = 20
		check_range_bounds = no
		if = {
			limit = {
				is_incorporated = yes
				is_in_revolt = no
				market_access >= 0.75
				devastation <= 5
				turmoil <= 0.5
			}
			add_to_global_variable_list = {
				name = olympics_host_city_applicants_ordered
				target = THIS
			}
		}
	}
	clear_global_variable_list = olympics_host_city_applicants
	every_in_global_list = {
		variable = olympics_host_city_applicants_ordered
		add_to_global_variable_list = {
			name = olympics_host_city_applicants
			target = THIS
		}
	}

	clear_global_variable_list = olympics_host_city_applicants_ordered

}