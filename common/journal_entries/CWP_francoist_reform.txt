francoist_reform = {
	icon = "gfx/interface/icons/event_icons/event_scales.dds"
	should_be_pinned_by_default = yes
	is_shown_when_inactive = {
		exists = c:SPA
		c:SPA = ROOT
		NOT = { has_variable = francoist_reforms }
		has_law = law_type:law_isolationism
	}
	hidden = {
		possible = {
	
		or = { 
			has_law = law_type:law_isolationism
			has_law = law_type:law_outlawed_dissent
			has_law = law_type:law_religious_nationalism
			has_law = law_type:law_militarized_police
			has_law = law_type:law_anocracy
			ig:ig_patriots = {
				is_in_government = yes
				is_influential = yes
				}
			
			}
		}	
	}
	immediate = {
		set_variable = {
			name = francoist_reform_level
			value = 0
		}
	}
	current_value = {
		value = var:francoist_reform_level
	}
	goal_add_value = {
		add = 600
	}
	
	on_monthly_pulse = {
		effect = {
					if = { 
						or = { 
							has_law = law_type:law_isolationism
							has_law = law_type:law_outlawed_dissent
							has_law = law_type:law_religious_nationalism
							has_law = law_type:law_militarized_police
							has_law = law_type:law_anocracy
							ig:ig_patriots = {
								is_in_government = yes
								is_influential = yes
								}
			
							}
					}
					change_variable = {
						name = francoist_reform_level
						add = 28
					}
				}
				
			}
		
	
	complete = {
			value = 6000
			ig:ig_securocrats = {
						is_influential = yes
						is_in_government = yes
					}
			ig:ig_patriots = {
						is_powerful = no
						is_in_government = no
					}
			c:USA = { relations:root >= relations_threshold:cordial }
			NOT = { has_law = law_type:law_isolationism }
			NOT = { has_law = law_type:law_outlawed_dissent }
			NOT = { has_law = law_type:law_militarized_police }
			NOT = { has_law = law_type:law_anocracy }
			
							
		}
	timeout = 600
	on_timeout = {
		remove_variable = francoist_reform_level
	}
	on_complete = {
		remove_variable = francoist_reform_level
		remove_modifier = international_pariah
	}
	on_fail = {
		remove_variable = francoist_reform_level
		add_radicals = {
			value = 0.5
			}

			
		
		###TODO CIVIL WAR create_diplomatic_play = {
				target_country = c:SPA
				type = dp_annex_war
			}
	}
	invalid = {
		NOT = {
			exists = c:SPA
		}
	}

	progressbar = yes
	weight = 100
	transferable = no
	should_be_pinned_by_default = yes
}