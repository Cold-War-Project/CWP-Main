namespace = united_kingdom_post_war_events

# Events beginning with .1 --> Rationing/Consumer Demand Control
# Events beginning with .9 --> Behind the scenes setup & clean up 

###############################
########## Rationing ##########
###############################
united_kingdom_post_war_events.100 = { # Start the Rationing
	type = country_event
	title = united_kingdom_post_war_events.100.title
	desc = united_kingdom_post_war_events.100.desc
	flavor = united_kingdom_post_war_events.100.flavor
	icon = "gfx/interface/icons/event_icons/event_default.dds"
	event_image = { video = "gfx/event_pictures/middleeast_courtroom_upheaval.bk2" }
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/middleeast/courtroom_upheaval"
	
	duration = 3
	
	trigger = {
		game_date >= 1946.1.1 # Game Start
		this = c:GBR # United Kingdom only
		NOT = { has_variable = gbr_post_war_rationing_over }
	}		
	
	immediate = { }
	
	option = {
		name = united_kingdom_post_war_events.100.a
		default_option = yes
		
		ai_chance = {
			base = 100
		}
	}
}

united_kingdom_post_war_events.101 = {
	# Pound Sterling Devaluation
	# Determine what the new value of the pound sterling will be when devaluing it
	type = country_event
	title = united_kingdom_post_war_events.101.title
	desc = united_kingdom_post_war_events.101.desc
	flavor = united_kingdom_post_war_events.101.flavor
	icon = "gfx/interface/icons/event_icons/event_default.dds"
	event_image = { video = "gfx/event_pictures/middleeast_courtroom_upheaval.bk2" }
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/middleeast/courtroom_upheaval"
	
	duration = 1
	
	immediate = { }
	
	option = {
		name = united_kingdom_post_war_events.101.a
		default_option = yes
		if = {
			limit = {
				var:gbr_rationing_inflation_rate >= 10
				var:gbr_rationing_inflation_rate < 15
			}
			change_global_variable = { name = currency_gbp_v divide = 100 }
			change_global_variable = { name = currency_gbp_v multiply = 95 }
			set_variable = { name = gbr_rationing_inflation_rate value = 1 }
		}
		else_if = {
			limit = {
				var:gbr_rationing_inflation_rate >= 15
				var:gbr_rationing_inflation_rate < 20
			}
			change_global_variable = { name = currency_gbp_v divide = 100 }
			change_global_variable = { name = currency_gbp_v multiply = 90 }
			set_variable = { name = gbr_rationing_inflation_rate value = 1 }
		}
		else_if = {
			limit = {
				var:gbr_rationing_inflation_rate >= 20
				var:gbr_rationing_inflation_rate < 25
			}
			change_global_variable = { name = currency_gbp_v divide = 100 }
			change_global_variable = { name = currency_gbp_v multiply = 85 }
			set_variable = { name = gbr_rationing_inflation_rate value = 1 }
		}
		else_if = {
			limit = {
				var:gbr_rationing_inflation_rate >= 25
				var:gbr_rationing_inflation_rate < 30
			}
			change_global_variable = { name = currency_gbp_v divide = 100 }
			change_global_variable = { name = currency_gbp_v multiply = 80 }
			set_variable = { name = gbr_rationing_inflation_rate value = 1 }
		}
		else_if = {
			limit = {
				var:gbr_rationing_inflation_rate >= 30
			}
			change_global_variable = { name = currency_gbp_v divide = 100 }
			change_global_variable = { name = currency_gbp_v multiply = 75 }
			set_variable = { name = gbr_rationing_inflation_rate value = 1 }
		}
		
		remove_variable = gbr_devalue_button_pressed
		
		ai_chance = {
			base = 100
		}
	}
}

united_kingdom_post_war_events.102 = {
	# Mild Winter Weather - 40% to 70% chance of happening
	type = country_event
	title = united_kingdom_post_war_events.102.title
	desc = united_kingdom_post_war_events.102.desc
	flavor = united_kingdom_post_war_events.102.flavor
	icon = "gfx/interface/icons/event_icons/event_default.dds"
	event_image = { video = "gfx/event_pictures/unspecific_devastation.bk2" }
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/middleeast/courtroom_upheaval"
	
	duration = 1
	
	immediate = {
		add_modifier = gbr_mild_winter_weather
		remove_modifier = gbr_mild_autumn_weather
	}
	
	option = {
		name = united_kingdom_post_war_events.102.a
		default_option = yes
		
		set_variable = gbr_winter_event_picked
		remove_variable = gbr_winter_event_triggered
		
		ai_chance = {
			base = 30
		}
	}
	option = {
		name = united_kingdom_post_war_events.102.b
		
		add_modifier = {
			name = gbr_winter_weather_money_cost
			multiplier = money_amount_multiplier_very_small	# 0.015% of GDP
		}
		remove_modifier = gbr_mild_winter_weather
		
		set_variable = gbr_winter_event_picked
		remove_variable = gbr_winter_event_triggered
		
		ai_chance = {
			base = 10
		}
	}
}

united_kingdom_post_war_events.103 = {
	# Moderate Winter Weather - 20% to 40% chance of happening
	type = country_event
	title = united_kingdom_post_war_events.103.title
	desc = united_kingdom_post_war_events.103.desc
	flavor = united_kingdom_post_war_events.103.flavor
	icon = "gfx/interface/icons/event_icons/event_default.dds"
	event_image = { video = "gfx/event_pictures/unspecific_devastation.bk2" }
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/middleeast/courtroom_upheaval"
	
	duration = 1
	
	immediate = {
		add_modifier = gbr_moderate_winter_weather
		remove_modifier = gbr_mild_autumn_weather
	}
	
	option = {
		name = united_kingdom_post_war_events.103.a
		default_option = yes
		
		set_variable = gbr_winter_event_picked
		remove_variable = gbr_winter_event_triggered
		
		ai_chance = {
			base = 50
		}
	}
	option = {
		name = united_kingdom_post_war_events.103.b
		
		set_variable = gbr_winter_event_picked
		remove_variable = gbr_winter_event_triggered
		
		ai_chance = {
			base = 30
		}
	}
	option = {
		name = united_kingdom_post_war_events.103.c
		
		set_variable = gbr_winter_event_picked
		remove_variable = gbr_winter_event_triggered
		
		ai_chance = {
			base = 10
		}
	}
}

united_kingdom_post_war_events.104 = {
	# Severe Winter Weather - 5% to 20% chance of happening
	type = country_event
	title = united_kingdom_post_war_events.104.title
	desc = united_kingdom_post_war_events.104.desc
	flavor = united_kingdom_post_war_events.104.flavor
	icon = "gfx/interface/icons/event_icons/event_default.dds"
	event_image = { video = "gfx/event_pictures/unspecific_devastation.bk2" }
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/middleeast/courtroom_upheaval"
	
	duration = 1
	
	immediate = {
		add_modifier = gbr_severe_winter_weather
		remove_modifier = gbr_mild_autumn_weather
	}
	
	option = {
		name = united_kingdom_post_war_events.104.a
		default_option = yes
		
		set_variable = gbr_winter_event_picked
		remove_variable = gbr_winter_event_triggered
		
		ai_chance = {
			base = 70
		}
	}
	option = {
		name = united_kingdom_post_war_events.104.b
		
		set_variable = gbr_winter_event_picked
		remove_variable = gbr_winter_event_triggered
		
		ai_chance = {
			base = 50
		}
	}
	option = {
		name = united_kingdom_post_war_events.104.c
		
		set_variable = gbr_winter_event_picked
		remove_variable = gbr_winter_event_triggered
		
		ai_chance = {
			base = 30
		}
	}
	option = {
		name = united_kingdom_post_war_events.104.d
		
		set_variable = gbr_winter_event_picked
		remove_variable = gbr_winter_event_triggered
		
		ai_chance = {
			base = 10
		}
	}
}

united_kingdom_post_war_events.105 = {
	# Critical Winter Weather - 1% to 5% chance of happening
	type = country_event
	title = united_kingdom_post_war_events.105.title
	desc = united_kingdom_post_war_events.105.desc
	flavor = united_kingdom_post_war_events.105.flavor
	icon = "gfx/interface/icons/event_icons/event_default.dds"
	event_image = { video = "gfx/event_pictures/unspecific_devastation.bk2" }
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/middleeast/courtroom_upheaval"
	
	duration = 1
	
	immediate = {
		add_modifier = gbr_critical_winter_weather
		remove_modifier = gbr_mild_autumn_weather
	}
	
	option = {
		name = united_kingdom_post_war_events.105.a
		default_option = yes
		
		set_variable = gbr_winter_event_picked
		remove_variable = gbr_winter_event_triggered
		
		ai_chance = {
			base = 90
		}
	}
	option = {
		name = united_kingdom_post_war_events.105.b
		
		set_variable = gbr_winter_event_picked
		remove_variable = gbr_winter_event_triggered
		
		ai_chance = {
			base = 70
		}
	}
	option = {
		name = united_kingdom_post_war_events.105.c
		
		set_variable = gbr_winter_event_picked
		remove_variable = gbr_winter_event_triggered
		
		ai_chance = {
			base = 50
		}
	}
	option = {
		name = united_kingdom_post_war_events.105.d
		
		set_variable = gbr_winter_event_picked
		remove_variable = gbr_winter_event_triggered
		
		ai_chance = {
			base = 30
		}
	}
	option = {
		name = united_kingdom_post_war_events.105.e
		
		set_variable = gbr_winter_event_picked
		remove_variable = gbr_winter_event_triggered
		
		ai_chance = {
			base = 10
		}
	}
}

united_kingdom_post_war_events.106 = {
	# Catastrophic Winter Weather - 1% chance of happening
	type = country_event
	title = united_kingdom_post_war_events.106.title
	desc = united_kingdom_post_war_events.106.desc
	flavor = united_kingdom_post_war_events.106.flavor
	icon = "gfx/interface/icons/event_icons/event_default.dds"
	event_image = { video = "gfx/event_pictures/unspecific_devastation.bk2" }
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/middleeast/courtroom_upheaval"
	
	duration = 1
	
	immediate = {
		add_modifier = gbr_catastrophic_winter_weather
		remove_modifier = gbr_mild_autumn_weather
	}
	
	option = {
		name = united_kingdom_post_war_events.106.a
		default_option = yes
		
		set_variable = gbr_winter_event_picked
		remove_variable = gbr_winter_event_triggered
		
		ai_chance = {
			base = 110
		}
	}
	option = {
		name = united_kingdom_post_war_events.106.b
		
		set_variable = gbr_winter_event_picked
		remove_variable = gbr_winter_event_triggered
		
		ai_chance = {
			base = 90
		}
	}
	option = {
		name = united_kingdom_post_war_events.106.c
		
		set_variable = gbr_winter_event_picked
		remove_variable = gbr_winter_event_triggered
		
		ai_chance = {
			base = 70
		}
	}
	option = {
		name = united_kingdom_post_war_events.106.d
		
		set_variable = gbr_winter_event_picked
		remove_variable = gbr_winter_event_triggered
		
		ai_chance = {
			base = 50
		}
	}
	option = {
		name = united_kingdom_post_war_events.106.e
		
		set_variable = gbr_winter_event_picked
		remove_variable = gbr_winter_event_triggered
		
		ai_chance = {
			base = 30
		}
	}
	option = {
		name = united_kingdom_post_war_events.106.f
		
		set_variable = gbr_winter_event_picked
		remove_variable = gbr_winter_event_triggered
		
		ai_chance = {
			base = 10
		}
	}
}

united_kingdom_post_war_events.107 = {
	# Mild Spring Weather - No effect currently - 100% chance of happening
	type = country_event
	title = united_kingdom_post_war_events.107.title
	desc = united_kingdom_post_war_events.107.desc
	flavor = united_kingdom_post_war_events.107.flavor
	icon = "gfx/interface/icons/event_icons/event_default.dds"
	event_image = { video = "gfx/event_pictures/africa_prosperous_farm.bk2" }
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/middleeast/courtroom_upheaval"
	
	duration = 1
	
	immediate = { add_modifier = gbr_mild_spring_weather }
	
	option = {
		name = united_kingdom_post_war_events.107.a
		default_option = yes
		
		set_variable = gbr_spring_event_picked
		remove_variable = gbr_spring_event_triggered
		
		ai_chance = {
			base = 100
		}
	}
}

united_kingdom_post_war_events.108 = {
	# Mild Summer Weather - No effect currently - 100% chance of happening
	type = country_event
	title = united_kingdom_post_war_events.108.title
	desc = united_kingdom_post_war_events.108.desc
	flavor = united_kingdom_post_war_events.108.flavor
	icon = "gfx/interface/icons/event_icons/event_default.dds"
	event_image = { video = "gfx/event_pictures/africa_prosperous_farm.bk2" }
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/middleeast/courtroom_upheaval"
	
	duration = 1
	
	immediate = { add_modifier = gbr_mild_summer_weather }
	
	option = {
		name = united_kingdom_post_war_events.108.a
		default_option = yes
		
		set_variable = gbr_summer_event_picked
		remove_variable = gbr_summer_event_triggered
		
		ai_chance = {
			base = 100
		}
	}
}

united_kingdom_post_war_events.109 = {
	# Mild Autumn Weather - No effect currently - 100% chance of happening
	type = country_event
	title = united_kingdom_post_war_events.109.title
	desc = united_kingdom_post_war_events.109.desc
	flavor = united_kingdom_post_war_events.109.flavor
	icon = "gfx/interface/icons/event_icons/event_default.dds"
	event_image = { video = "gfx/event_pictures/africa_prosperous_farm.bk2" }
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/middleeast/courtroom_upheaval"
	
	duration = 1
	
	immediate = { add_modifier = gbr_mild_autumn_weather }
	
	option = {
		name = united_kingdom_post_war_events.109.a
		default_option = yes
				
		set_variable = gbr_autumn_event_picked
		remove_variable = gbr_autumn_event_triggered
		
		ai_chance = {
			base = 100
		}
	}
}

united_kingdom_post_war_events.110 = { # End the Rationing
	type = country_event
	title = united_kingdom_post_war_events.110.title
	desc = united_kingdom_post_war_events.110.desc
	flavor = united_kingdom_post_war_events.110.flavor
	icon = "gfx/interface/icons/event_icons/event_default.dds"
	event_image = { video = "gfx/event_pictures/middleeast_courtroom_upheaval.bk2" }
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/middleeast/courtroom_upheaval"
	
	duration = 3
	
	trigger = {
		this = c:GBR # United Kingdom only
	}		
	
	immediate = { }
	
	option = {
		name = united_kingdom_post_war_events.110.a
		default_option = yes
		
		ai_chance = {
			base = 100
		}
	}
}

united_kingdom_post_war_events.111 = { # 20 Years of Rationg = Failure (End the Rationing)
	type = country_event
	title = united_kingdom_post_war_events.111.title
	desc = united_kingdom_post_war_events.111.desc
	flavor = united_kingdom_post_war_events.111.flavor
	icon = "gfx/interface/icons/event_icons/event_default.dds"
	event_image = { video = "gfx/event_pictures/middleeast_courtroom_upheaval.bk2" }
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/middleeast/courtroom_upheaval"
	
	duration = 1
	
	trigger = {
		this = c:GBR # United Kingdom only
	}		
	
	immediate = {
		hidden_effect = {
			set_variable = { name = gbr_rationing_timeout_modifier_length value = var:gbr_rationing_number_of_goods }
			change_variable = { name = gbr_rationing_timeout_modifier_length multiply = 12 }
		}
	}
	
	option = {
		name = united_kingdom_post_war_events.111.a
		default_option = yes
		
		add_modifier = {
			name = gbr_goods_demand_inflation
			multiplier = var:gbr_rationing_number_of_goods
			is_decaying = yes
			months = var:gbr_rationing_timeout_modifier_length
		}
		
		ai_chance = {
			base = 100
		}
	}
}

######################################
########## Setup & Clean Up ##########
######################################
# united_kingdom_post_war_events.900 = {
	# # Set up event for United Kingdom Post War Journals
	# type = country_event
	# hidden = yes
	
	# immediate = {
		# if = {	# Determine whether the UK is player controlled or not
			# limit = {
				# c:GBR = { is_player = yes }
			# }
			# c:GBR = { set_variable = gbr_player_post_war }
		# }
	# }
# }

united_kingdom_post_war_events.901 {
	# Determine goods to be rationed at game start
	type = country_event
	hidden = yes
	
	immediate = {
		gbr_start_rationing_aluminum = yes
		gbr_start_rationing_bauxite = yes
		gbr_start_rationing_fertilizer = yes
		gbr_start_rationing_clothes = yes
		gbr_start_rationing_coal = yes
		gbr_start_rationing_coffee = yes
		gbr_start_rationing_copper = yes
		gbr_start_rationing_engines = yes
		gbr_start_rationing_explosives = yes
		gbr_start_rationing_fabric = yes
		gbr_start_rationing_fish = yes
		gbr_start_rationing_fruit = yes
		gbr_start_rationing_glass = yes
		gbr_start_rationing_grain = yes
		gbr_start_rationing_groceries = yes
		gbr_start_rationing_high_quality_fabric = yes
		gbr_start_rationing_iron = yes
		gbr_start_rationing_lead = yes
		gbr_start_rationing_liquor = yes
		gbr_start_rationing_meat = yes
		gbr_start_rationing_oil = yes
		gbr_start_rationing_opium = yes
		gbr_start_rationing_paper = yes
		gbr_start_rationing_pharmaceuticals = yes
		gbr_start_rationing_phosphorus = yes
		gbr_start_rationing_plastics = yes
		gbr_start_rationing_refined_fuel = yes
		gbr_start_rationing_rubber = yes
		gbr_start_rationing_steel = yes
		gbr_start_rationing_sugar = yes
		gbr_start_rationing_tea = yes
		gbr_start_rationing_tobacco = yes
		gbr_start_rationing_tools = yes
		gbr_start_rationing_wine = yes
		gbr_start_rationing_wood = yes
	}
}

united_kingdom_post_war_events.902 {
	# Variable clean up
	type = country_event
	hidden = yes
	
	immediate = {
	
	}
}