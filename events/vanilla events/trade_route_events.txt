namespace = trade_route_events

trade_route_events.1 = {
	type = country_event
	placement = ROOT

	title = trade_route_events.1.t
	desc = trade_route_events.1.d
	flavor = trade_route_events.1.f

	event_image = {
		video = "southamerica_aristocrats"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	duration = 3

	trigger = {
		NOT = {
			any_scope_state = { has_building = building_arms_industry }
		}
		any_market = {
			owner = root
			any_trade_route = {
				actor_market.owner = root
				importer.owner = root
				goods = g:small_arms
				exporter.owner = {
					save_temporary_scope_as = arms_seller
				}
				root = {
					"scope:arms_seller.infamy" >= 5
				}
			}
		}
	}

	immediate = {
		random_market = {
			limit = {
				owner = root
				any_trade_route = {
					actor_market.owner = root
					importer.owner = root
					goods = g:small_arms
					exporter.owner = {
						save_temporary_scope_as = arms_seller
					}
					root = {
						"scope:arms_seller.infamy" >= 5
					}
				}
			}
			random_trade_route = {
				limit = {
					actor_market.owner = root
					importer.owner = root
					goods = g:small_arms
					exporter.owner = {
						save_temporary_scope_as = arms_seller
					}
					root = {
						"scope:arms_seller.infamy" >= 5
					}
				}
				exporter.owner = {
					save_scope_as = arms_seller_threat
				}
			}
		}
	}

	option = {
		name = trade_route_events.1.a
		add_journal_entry = {
			type = je_build_local_arms_industry
		}
	}

	option = {
		name = trade_route_events.1.b
		default_option = yes
		ig:ig_armed_forces = {
			add_modifier = {
				name = ig_unreliable_weapon_imports
				months = normal_modifier_time
			}
		}
		scope:arms_seller_threat = {
			change_infamy = -5
		}
	}
}

trade_route_events.2 = {
	type = country_event
	placement = ROOT

	title = trade_route_events.2.t
	desc = trade_route_events.2.d
	flavor = trade_route_events.2.f

	event_image = {
		video = "middleeast_engineer_blueprint"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	duration = 3

	trigger = {
		any_market = {
			owner = root
			any_trade_route = {
				actor_market.owner = root
				importer.owner = root
				goods = g:small_arms
				OR = {
					AND = {
						root = { is_researching_technology = gunsmithing }
						exporter.owner = { has_technology_researched = gunsmithing }
					}
					AND = {
						root = { is_researching_technology = percussion_cap }
						exporter.owner = { has_technology_researched = percussion_cap }
					}
					AND = {
						root = { is_researching_technology = rifling }
						exporter.owner = { has_technology_researched = rifling }
					}
					AND = {
						root = { is_researching_technology = repeaters }
						exporter.owner = { has_technology_researched = repeaters }
					}
					AND = {
						root = { is_researching_technology = bolt_action_rifles }
						exporter.owner = { has_technology_researched = bolt_action_rifles }
					}
				}
			}
		}
	}

	immediate = {
		random_market = {
			limit = {
				owner = root
				any_trade_route = {
					actor_market.owner = root
					importer.owner = root
					goods = g:small_arms
					OR = {
						AND = {
							root = { is_researching_technology = gunsmithing }
							exporter.owner = { has_technology_researched = gunsmithing }
						}
						AND = {
							root = { is_researching_technology = percussion_cap }
							exporter.owner = { has_technology_researched = percussion_cap }
						}
						AND = {
							root = { is_researching_technology = rifling }
							exporter.owner = { has_technology_researched = rifling }
						}
						AND = {
							root = { is_researching_technology = repeaters }
							exporter.owner = { has_technology_researched = repeaters }
						}
						AND = {
							root = { is_researching_technology = bolt_action_rifles }
							exporter.owner = { has_technology_researched = bolt_action_rifles }
						}
					}
				}
			}
			random_trade_route = {
				limit = {
					actor_market.owner = root
					importer.owner = root
					goods = g:small_arms
					OR = {
						AND = {
							root = { is_researching_technology = gunsmithing }
							exporter.owner = { has_technology_researched = gunsmithing }
						}
						AND = {
							root = { is_researching_technology = percussion_cap }
							exporter.owner = { has_technology_researched = percussion_cap }
						}
						AND = {
							root = { is_researching_technology = rifling }
							exporter.owner = { has_technology_researched = rifling }
						}
						AND = {
							root = { is_researching_technology = repeaters }
							exporter.owner = { has_technology_researched = repeaters }
						}
						AND = {
							root = { is_researching_technology = bolt_action_rifles }
							exporter.owner = { has_technology_researched = bolt_action_rifles }
						}
					}
				}
				exporter.owner = {
					save_scope_as = arms_seller_gun_tech
				}
			}
		}
	}

	option = {
		name = trade_route_events.2.a
		add_modifier = {
			name = modifier_researching_imported_weapons
			multiplier = money_amount_multiplier_small
			months = normal_modifier_time
		}
		if = {
			limit = { is_researching_technology = gunsmithing }
			add_technology_progress = {
				technology = gunsmithing
				progress = 2500
			}
		}
		else_if = {
			limit = { is_researching_technology = percussion_cap }
			add_technology_progress = {
				technology = percussion_cap
				progress = 3500
			}
		}
		else_if = {
			limit = { is_researching_technology = rifling }
			add_technology_progress = {
				technology = rifling
				progress = 3500
			}
		}
		else_if = {
			limit = { is_researching_technology = repeaters }
			add_technology_progress = {
				technology = repeaters
				progress = 4500
			}
		}
		else_if = {
			limit = { is_researching_technology = bolt_action_rifles }
			add_technology_progress = {
				technology = bolt_action_rifles
				progress = 6000
			}
		}
	}

	option = {
		name = trade_route_events.2.b
		default_option = yes
	}
}

trade_route_events.3 = {
	type = country_event
	placement = ROOT

	title = trade_route_events.3.t
	desc = trade_route_events.3.d
	flavor = trade_route_events.3.f

	event_image = {
		video = "asia_farmers_market"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_trade.dds"

	duration = 3

	trigger = {
		any_interest_group = {
			is_marginal = no
			OR = {
				is_interest_group_type = ig_devout
				is_interest_group_type = ig_trade_unions
			}
		}
		capital.market = {
			owner = root
			mg:grain = { market_goods_pricier > 0.25 }
			any_trade_route = {
				actor_market.owner = root
				importer.owner = root
				OR = {
					goods = g:wine
					goods = g:luxury_clothes
					goods = g:luxury_furniture
				}
			}
			NOT = {
				any_trade_route = {
					importer.owner = root
					goods = g:grain
				}
			}
		}
	}

	immediate = {
		random_interest_group = {
			limit = {
				is_marginal = no
				OR = {
					is_interest_group_type = ig_devout
					is_interest_group_type = ig_trade_unions
				}
			}
			save_scope_as = angry_luxury_import_ig
		}
	}

	option = {
		name = trade_route_events.3.a
		add_journal_entry = {
			type = je_set_up_grain_import
			target = scope:angry_luxury_import_ig
		}
	}

	option = {
		name = trade_route_events.3.b
		default_option = yes
		scope:angry_luxury_import_ig = {
			add_modifier = {
				name = ig_refused_desired_imports
				months = normal_modifier_time
			}
		}
	}
}

trade_route_events.4 = {
	type = country_event
	placement = ROOT

	title = trade_route_events.4.t
	desc = trade_route_events.4.d
	flavor = trade_route_events.4.f

	event_image = {
		video = "unspecific_gears_pistons"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	duration = 3

	trigger = {
		ig:ig_conglomerates = {
			is_marginal = no
		}
		capital.market = {
			owner = root
			mg:steel = { market_goods_pricier > 0.25 }
			NOT = {
				any_trade_route = {
					importer.owner = root
					goods = g:steel
				}
			}
		}
	}

	option = {
		name = trade_route_events.4.a
		add_journal_entry = {
			type = je_set_up_steel_import
		}
	}

	option = {
		name = trade_route_events.4.b
		default_option = yes
		ig:ig_conglomerates = {
			add_modifier = {
				name = ig_refused_desired_imports
				months = normal_modifier_time
			}
		}
	}
}

trade_route_events.5 = {
	type = country_event
	placement = ROOT

	title = trade_route_events.5.t
	desc = trade_route_events.5.d
	flavor = trade_route_events.5.f

	event_image = {
		video = "asia_farmers_market"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_trade.dds"

	duration = 3

	trigger = {
		ig:ig_intellectuals = {
			is_marginal = no
		}
		capital.market = {
			owner = root
			mg:paper = { market_goods_pricier > 0.25 }
			NOT = {
				any_trade_route = {
					importer.owner = root
					goods = g:paper
				}
			}
		}
	}

	option = {
		name = trade_route_events.5.a
		add_journal_entry = {
			type = je_set_up_paper_import
		}
	}

	option = {
		name = trade_route_events.5.b
		default_option = yes
		ig:ig_intellectuals = {
			add_modifier = {
				name = ig_refused_desired_imports
				months = normal_modifier_time
			}
		}
	}
}
